!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Cropper=e()}}(function(){return function e(t,r,o){function n(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return n(r||e)},l,l.exports,e,t,r,o)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(e,t,r){var o=e("./_root"),n=o.Symbol;t.exports=n},{"./_root":8}],2:[function(e,t,r){function o(e){return null==e?void 0===e?c:s:p&&p in Object(e)?i(e):a(e)}var n=e("./_Symbol"),i=e("./_getRawTag"),a=e("./_objectToString"),s="[object Null]",c="[object Undefined]",p=n?n.toStringTag:void 0;t.exports=o},{"./_Symbol":1,"./_getRawTag":5,"./_objectToString":6}],3:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,r){var o=e("./_overArg"),n=o(Object.getPrototypeOf,Object);t.exports=n},{"./_overArg":7}],5:[function(e,t,r){function o(e){var t=a.call(e,c),r=e[c];try{e[c]=void 0}catch(e){}var o=s.call(e);return t?e[c]=r:delete e[c],o}var n=e("./_Symbol"),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,c=n?n.toStringTag:void 0;t.exports=o},{"./_Symbol":1}],6:[function(e,t,r){function o(e){return i.call(e)}var n=Object.prototype,i=n.toString;t.exports=o},{}],7:[function(e,t,r){function o(e,t){return function(r){return e(t(r))}}t.exports=o},{}],8:[function(e,t,r){var o=e("./_freeGlobal"),n="object"==typeof self&&self&&self.Object===Object&&self,i=o||n||Function("return this")();t.exports=i},{"./_freeGlobal":3}],9:[function(e,t,r){function o(e){return null!=e&&"object"==typeof e}t.exports=o},{}],10:[function(e,t,r){function o(e){if(!a(e)||n(e)!=s)return!1;var t=i(e);if(null===t)return!0;var r=d.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==h}var n=e("./_baseGetTag"),i=e("./_getPrototype"),a=e("./isObjectLike"),s="[object Object]",c=Function.prototype,p=Object.prototype,l=c.toString,d=p.hasOwnProperty,h=l.call(Object);t.exports=o},{"./_baseGetTag":2,"./_getPrototype":4,"./isObjectLike":9}],11:[function(e,t,r){function o(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===o||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){v&&f&&(v=!1,f.length?m=f.concat(m):g=-1,m.length&&c())}function c(){if(!v){var e=i(s);v=!0;for(var t=m.length;t;){for(f=m,m=[];++g<t;)f&&f[g].run();g=-1,t=m.length}f=null,v=!1,a(e)}}function p(e,t){this.fun=e,this.array=t}function l(){}var d,h,u=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:o}catch(e){d=o}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(e){h=n}}();var f,m=[],v=!1,g=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new p(e,t)),1!==m.length||v||i(c)},p.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=l,u.addListener=l,u.once=l,u.off=l,u.removeListener=l,u.removeAllListeners=l,u.emit=l,u.prependListener=l,u.prependOnceListener=l,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],12:[function(e,t,r){"use strict";function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(r,o,i){var s=e(r,o,i),c=s.dispatch,p=[],l={getState:s.getState,dispatch:function(e){return c(e)}};return p=t.map(function(e){return e(l)}),c=a.default.apply(void 0,p)(s.dispatch),n({},s,{dispatch:c})}}}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};r.default=o;var i=e("./compose"),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},{"./compose":15}],13:[function(e,t,r){"use strict";function o(e,t){return function(){return t(e.apply(void 0,arguments))}}function n(e,t){if("function"==typeof e)return o(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),n={},i=0;i<r.length;i++){var a=r[i],s=e[a];"function"==typeof s&&(n[a]=o(s,t))}return n}r.__esModule=!0,r.default=n},{}],14:[function(e,t,r){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var r=t&&t.type;return"Given action "+(r&&'"'+r.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function i(e,t,r,o){var n=Object.keys(t),i=r&&r.type===c.ActionTypes.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===n.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!(0,l.default)(e))return"The "+i+' has unexpected type of "'+{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+n.join('", "')+'"';var a=Object.keys(e).filter(function(e){return!t.hasOwnProperty(e)&&!o[e]});return a.forEach(function(e){o[e]=!0}),a.length>0?"Unexpected "+(a.length>1?"keys":"key")+' "'+a.join('", "')+'" found in '+i+'. Expected to find one of the known reducer keys instead: "'+n.join('", "')+'". Unexpected keys will be ignored.':void 0}function a(e){Object.keys(e).forEach(function(t){var r=e[t];if(void 0===r(void 0,{type:c.ActionTypes.INIT}))throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');if(void 0===r(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+c.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}function s(e){for(var r=Object.keys(e),o={},s=0;s<r.length;s++){var c=r[s];"production"!==t.env.NODE_ENV&&void 0===e[c]&&(0,h.default)('No reducer provided for key "'+c+'"'),"function"==typeof e[c]&&(o[c]=e[c])}var p=Object.keys(o);if("production"!==t.env.NODE_ENV)var l={};var d;try{a(o)}catch(e){d=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments[1];if(d)throw d;if("production"!==t.env.NODE_ENV){var a=i(e,o,r,l);a&&(0,h.default)(a)}for(var s=!1,c={},u=0;u<p.length;u++){var f=p[u],m=o[f],v=e[f],g=m(v,r);if(void 0===g){var E=n(f,r);throw new Error(E)}c[f]=g,s=s||g!==v}return s?c:e}}r.__esModule=!0,r.default=s;var c=e("./createStore"),p=e("lodash/isPlainObject"),l=o(p),d=e("./utils/warning"),h=o(d)}).call(this,e("_process"))},{"./createStore":16,"./utils/warning":18,_process:11,"lodash/isPlainObject":10}],15:[function(e,t,r){"use strict";function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var o=t[t.length-1],n=t.slice(0,-1);return function(){return n.reduceRight(function(e,t){return t(e)},o.apply(void 0,arguments))}}r.__esModule=!0,r.default=o},{}],16:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r){function o(){g===v&&(g=v.slice())}function i(){return m}function s(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return o(),g.push(e),function(){if(t){t=!1,o();var r=g.indexOf(e);g.splice(r,1)}}}function l(e){if(!(0,a.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(E)throw new Error("Reducers may not dispatch actions.");try{E=!0,m=f(m,e)}finally{E=!1}for(var t=v=g,r=0;r<t.length;r++)t[r]();return e}function d(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");f=e,l({type:p.INIT})}function h(){var e,t=s;return e={subscribe:function(e){function r(){e.next&&e.next(i())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return r(),{unsubscribe:t(r)}}},e[c.default]=function(){return this},e}var u;if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(n)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var f=e,m=t,v=[],g=v,E=!1;return l({type:p.INIT}),u={dispatch:l,subscribe:s,getState:i,replaceReducer:d},u[c.default]=h,u}r.__esModule=!0,r.ActionTypes=void 0,r.default=n;var i=e("lodash/isPlainObject"),a=o(i),s=e("symbol-observable"),c=o(s),p=r.ActionTypes={INIT:"@@redux/INIT"}},{"lodash/isPlainObject":10,"symbol-observable":19}],17:[function(e,t,r){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(){}r.__esModule=!0,r.compose=r.applyMiddleware=r.bindActionCreators=r.combineReducers=r.createStore=void 0;var i=e("./createStore"),a=o(i),s=e("./combineReducers"),c=o(s),p=e("./bindActionCreators"),l=o(p),d=e("./applyMiddleware"),h=o(d),u=e("./compose"),f=o(u),m=e("./utils/warning"),v=o(m);"production"!==t.env.NODE_ENV&&"string"==typeof n.name&&"isCrushed"!==n.name&&(0,v.default)("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build."),r.createStore=a.default,r.combineReducers=c.default,r.bindActionCreators=l.default,r.applyMiddleware=h.default,r.compose=f.default}).call(this,e("_process"))},{"./applyMiddleware":12,"./bindActionCreators":13,"./combineReducers":14,"./compose":15,"./createStore":16,"./utils/warning":18,_process:11}],18:[function(e,t,r){"use strict";function o(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}r.__esModule=!0,r.default=o},{}],19:[function(e,t,r){t.exports=e("./lib/index")},{"./lib/index":20}],20:[function(e,t,r){(function(o){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./ponyfill"),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:void 0!==t?t:Function("return this")();var s=(0,a.default)(n);r.default=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill":21}],21:[function(e,t,r){"use strict";function o(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{}],22:[function(e,t,r){"use strict";var o={aspectRatio:0,cropperMode:"none",dragMode:"crop",movable:!0,preview:void 0,responsive:!1,toolbar:!0,zoomable:!0};t.exports=o},{}],23:[function(e,t,r){"use strict";r.keyEvents=function(e){return function(t){switch(t.keyCode){case 27:e.clearCropper()}}},r.mouseEvents=function(e){return function(t){var r=window.pageXOffset,o=window.pageYOffset,n=t.clientX+r,i=t.clientY+o;switch(t.type){case"mousedown":e.cropperBorderStart(n,i);break;case"mouseup":e.cropperBorderEnd();break;case"mousemove":e.cropperBorderMove(n,i)}t.preventDefault()}}},{}],24:[function(e,t,r){"use strict";function o(e,t){var r,o,i,a,s;return"border"===e?(r=n(t),o=0,i=0,a=parseFloat(r.width),s=parseFloat(r.height)):"image"===e?(r=n(t.firstChild),o=parseFloat(r.left),i=parseFloat(r.top),a=o+parseFloat(r.width),s=i+parseFloat(r.height)):(o=Number.MIN_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MAX_VALUE),{startX:o,startY:i,endX:a,endY:s}}function n(e){return e.ownerDocument.defaultView.getComputedStyle(e)}function i(e){for(var t=0,r=0;e;)t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:t,top:r}}function a(e,t,r,o){return Math.abs(r-e)<=5&&Math.abs(o-t)<=5}function s(e,t,r,n,i,a){var s=0,c=0,p=o(i,a);return e<p.startX&&(s=e-p.startX),t<p.startY&&(c=t-p.startY),r>p.endX&&(s=r-p.endX),n>p.endY&&(c=n-p.endY),{cropperStartX:e-s,cropperStartY:t-c,cropperEndX:r-s,cropperEndY:n-c}}function c(e,t,r,o,i,a,s,c){if("image"===s){var p=n(c.firstChild),l=e+parseFloat(p.width),d=t+parseFloat(p.height);e>r&&(e=r),t>o&&(t=o),l<i&&(e+=i-l),d<a&&(t+=a-d)}return{leftOffset:e,topOffset:t}}function p(e,t,r,n,i,a,s,c,p){var l=o(c,p),d={cropperStartX:e,cropperStartY:t,cropperEndX:r,cropperEndY:n};if(d.cropperStartX=Math.min(Math.max(d.cropperStartX,l.startX),l.endX),d.cropperEndX=Math.min(Math.max(d.cropperEndX,l.startX),l.endX),d.cropperStartY=Math.min(Math.max(d.cropperStartY,l.startY),l.endY),d.cropperEndY=Math.min(Math.max(d.cropperEndY,l.startY),l.endY),s<=0)return d;var h=d.cropperEndX-d.cropperStartX,u=d.cropperEndY-d.cropperStartY,f=h>0?1:-1,m=u>0?1:-1;return h=Math.abs(h),u=Math.abs(u),h/s<=u?(u=h/s,-1===a?d.cropperStartY=d.cropperEndY-u*m:d.cropperEndY=d.cropperStartY+u*m):(h=u*s,-1===i?d.cropperStartX=d.cropperEndX-h*f:d.cropperEndX=d.cropperStartX+h*f),d}function l(e,t,r,o,n,i,a){return p(e,t,r,o,0,0,n,i,a)}r.getComputedStyle=n,r.getElementOffset=i,r.inRange=a,r.normalizeCoordinateDuringMoveCropper=s,r.normalizeCoordinateDuringMoveImage=c,r.normalizeCoordinateDuringResize=p,r.normalizeCoordinateDuringCrop=l},{}],25:[function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=e("./state/action"),i=e("./render"),a=e("./events"),s=a.keyEvents,c=a.mouseEvents,p=function e(t){var r=this;o(this,e),this.actions=new n,this.actions.setOptions(t);var i=this.actions.getState();this.initCropper(i.options),this.actions.subscribe(function(){r.draw()}),window.addEventListener("resize",function(){r.onresize()});var a=s(this.actions),p=c(this.actions);window.document.addEventListener("keydown",a),this.rootElement.addEventListener("mousedown",p),this.rootElement.addEventListener("mousemove",p),this.rootElement.addEventListener("mouseup",p)};Object.assign(p.prototype,i),t.exports=p},{"./events":23,"./render":26,"./state/action":27}],26:[function(e,t,r){"use strict";function o(){this.actions.clearCropper()}function n(){var e=this.containerElement.getElementsByClassName("cropper-handler");e=Array.from(e);var t=!0,r=!1,o=void 0;try{for(var n,i=e[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){n.value.style.display="none"}}catch(e){r=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw o}}var a=this.containerElement.getElementsByClassName("cropper-cover");a=Array.from(a);var s=!0,c=!1,p=void 0;try{for(var l,d=a[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){l.value.style.display="none"}}catch(e){c=!0,p=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw p}}}function i(){var e,t,r,o,n=this.containerElement,i=n.firstChild,a=Y(n),s=parseInt(a.width),c=parseInt(a.height),p=this.srcImageWidth,l=this.srcImageHeight;p>l?(e=p*c/l,t=c,r=0,o=(s-e)/2):(e=s,t=l*s/p,r=(c-t)/2,o=0),i.style.width=e+"px",i.style.height=t+"px",i.style.left=o+"px",i.style.top=r+"px"}function a(){this.repositionImage(),this.clear()}function s(e){var t=document.createElement("a");if(t.className=e.className,"function"==typeof e.action){var r=this;t.addEventListener("click",function(t){e.action.call(r),t.stopPropagation()}),t.addEventListener("mousedown",function(e){e.stopPropagation()}),t.addEventListener("mouseup",function(e){e.stopPropagation()}),t.addEventListener("mousemove",function(e){e.stopPropagation()})}return t}function c(){var e=this.actions.getState();if(this.containerElement.style.cursor=e.rootCursor,"image"===e.dragTarget){var t=this.containerElement.firstChild;t.style.top=e.topOffset+"px",t.style.left=e.leftOffset+"px"}switch(e.options.preview&&this.drawPreview(e),e.dragMode){case"crop":case"move":var r=e.cropperStartX,o=e.cropperStartY,n=e.cropperEndX,i=e.cropperEndY;if(-1===r||-1===o||-1===n||-1===i)return;return this.drawCropper(r,o,n,i);default:return this.clearCropper()}}function p(e,t,r,o){this.coverTopLeft||(this.coverTopLeft=document.createElement("div"),this.coverTopLeft.className="cropper-cover cropper-cover-top-left",this.containerElement.appendChild(this.coverTopLeft)),this.coverTopCenter||(this.coverTopCenter=document.createElement("div"),this.coverTopCenter.className="cropper-cover cropper-cover-top-center",this.containerElement.appendChild(this.coverTopCenter)),this.coverTopRight||(this.coverTopRight=document.createElement("div"),this.coverTopRight.className="cropper-cover cropper-cover-top-right",this.containerElement.appendChild(this.coverTopRight)),this.coverRightCenter||(this.coverRightCenter=document.createElement("div"),this.coverRightCenter.className="cropper-cover cropper-cover-right-center",this.containerElement.appendChild(this.coverRightCenter)),this.coverBottomRight||(this.coverBottomRight=document.createElement("div"),this.coverBottomRight.className="cropper-cover cropper-cover-bottom-right",this.containerElement.appendChild(this.coverBottomRight)),this.coverBottomCenter||(this.coverBottomCenter=document.createElement("div"),this.coverBottomCenter.className="cropper-cover cropper-cover-bottom-center",this.containerElement.appendChild(this.coverBottomCenter)),this.coverBottomLeft||(this.coverBottomLeft=document.createElement("div"),this.coverBottomLeft.className="cropper-cover cropper-cover-bottom-left",this.containerElement.appendChild(this.coverBottomLeft)),this.coverLeftCenter||(this.coverLeftCenter=document.createElement("div"),this.coverLeftCenter.className="cropper-cover cropper-cover-left-center",this.containerElement.appendChild(this.coverLeftCenter)),this.coverCenterCenter||(this.coverCenterCenter=document.createElement("div"),this.coverCenterCenter.className="cropper-cover cropper-cover-center-center",this.containerElement.appendChild(this.coverCenterCenter));var n=this.containerElement.getBoundingClientRect(),i=n.width,a=n.height;_(this.coverTopLeft,0,0,e,t),_(this.coverTopCenter,0,e,r-e,t),_(this.coverTopRight,0,r,i-r,t),_(this.coverRightCenter,t,r,i-r,o-t),_(this.coverBottomRight,o,r,i-r,a-o),_(this.coverBottomCenter,o,e,r-e,a-o),_(this.coverBottomLeft,o,0,e,a-o),_(this.coverLeftCenter,t,0,e,o-t),_(this.coverCenterCenter,t,e,r-e,o-t)}function l(e,t,r,o){var n=Math.min(e,r),i=Math.min(t,o),a=Math.max(e,r),s=Math.max(t,o);s-i<10&&a-n<10||(this.drawCovers(n,i,a,s),this.drawHandlers(n,i,a,s))}function d(e,t,r,o){this.handlerTopLeft||(this.handlerTopLeft=document.createElement("span"),this.handlerTopLeft.className="cropper-handler cropper-handler-top-left",this.containerElement.appendChild(this.handlerTopLeft)),this.handlerTopCenter||(this.handlerTopCenter=document.createElement("span"),this.handlerTopCenter.className="cropper-handler cropper-handler-top-center",this.containerElement.appendChild(this.handlerTopCenter)),this.handlerTopRight||(this.handlerTopRight=document.createElement("span"),this.handlerTopRight.className="cropper-handler cropper-handler-top-right",this.containerElement.appendChild(this.handlerTopRight)),this.handlerRightCenter||(this.handlerRightCenter=document.createElement("span"),this.handlerRightCenter.className="cropper-handler cropper-handler-right-center",this.containerElement.appendChild(this.handlerRightCenter)),this.handlerBottomRight||(this.handlerBottomRight=document.createElement("span"),this.handlerBottomRight.className="cropper-handler cropper-handler-bottom-right",this.containerElement.appendChild(this.handlerBottomRight)),this.handlerBottomCenter||(this.handlerBottomCenter=document.createElement("span"),this.handlerBottomCenter.className="cropper-handler cropper-handler-bottom-center",this.containerElement.appendChild(this.handlerBottomCenter)),this.handlerBottomLeft||(this.handlerBottomLeft=document.createElement("span"),this.handlerBottomLeft.className="cropper-handler cropper-handler-bottom-left",this.containerElement.appendChild(this.handlerBottomLeft)),this.handlerLeftCenter||(this.handlerLeftCenter=document.createElement("span"),this.handlerLeftCenter.className="cropper-handler cropper-handler-left-center",this.containerElement.appendChild(this.handlerLeftCenter)),O(this.handlerTopLeft,t-2,e-2),O(this.handlerTopCenter,t-2,(e+r)/2),O(this.handlerTopRight,t-2,r-4),O(this.handlerRightCenter,(t+o)/2,r-4),O(this.handlerBottomRight,o-4,r-4),O(this.handlerBottomCenter,o-4,(e+r)/2),O(this.handlerBottomLeft,o-4,e-2),O(this.handlerLeftCenter,(t+o)/2,e-2)}function h(e){if(this.previewContext){var t=this.getSelectedRect(e),r=t.x,o=t.y,n=t.width,i=t.height;if(n<=10||i<=10)return this.clearCropper(),void this.previewContext.clearRect(0,0,this.previewCanvasWidth,this.previewCanvasHeight);var a,s,c,p;this.previewCanvasWidth/n*i<=this.previewCanvasHeight?(c=this.previewCanvasWidth,p=this.previewCanvasWidth/n*i,a=0,s=(this.previewCanvasHeight-p)/2):(c=this.previewCanvasHeight/i*n,p=this.previewCanvasHeight,a=(this.previewCanvasWidth-c)/2,s=0),this.previewContext.clearRect(0,0,this.previewCanvasWidth,this.previewCanvasHeight),this.previewContext.drawImage(this.sourceImage,r,o,n,i,a,s,c,p)}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",t=this.getSelectedRect(),r=t.x,o=t.y,n=t.width,i=t.height;if(!(n<=10||i<=10)){var a=document.createElement("canvas");a.setAttribute("width",n),a.setAttribute("height",i);return a.getContext("2d").drawImage(this.sourceImage,r,o,n,i,0,0,n,i),a.toDataURL(e)}}function f(e){e=e||this.actions.getState();var t=Y(this.containerElement.firstChild),r=parseInt(t.width),o=parseInt(t.height),n=parseInt(t.top)||0,i=parseInt(t.left)||0,a=Math.min(e.cropperStartX,e.cropperEndX),s=Math.min(e.cropperStartY,e.cropperEndY),c=Math.max(e.cropperStartX,e.cropperEndX),p=Math.max(e.cropperStartY,e.cropperEndY),l=this.srcImageWidth/r,d=this.srcImageHeight/o;return{x:(-i+a)*l,y:(-n+s)*d,width:(c-a)*l,height:(p-s)*d}}function m(){this.showToolbarElement.style.display="none",this.toolbarElement.style.display="inline-block"}function v(){this.toolbarElement.style.display="none",this.showToolbarElement.style.display="inline-block"}function g(e){var t=this;y();var r=e.element;if(!r)throw new Error("没有指定目标节点");this.rootElement=document.createElement("div"),this.rootElement.className="cropper-container",this.containerElement=document.createElement("div"),this.containerElement.className="cropper-img-container";var o=r.parentNode;return o.removeChild(r),this.containerElement.appendChild(r),this.rootElement.appendChild(this.containerElement),o.appendChild(this.rootElement),r.onload=function(){t.sourceImage=new Image;var o=t;t.sourceImage.onload=function(){if(o.srcImageWidth=o.sourceImage.width,o.srcImageHeight=o.sourceImage.height,o.initCropperStyle(),e.toolbar){o.toolbarElement=document.createElement("div"),o.toolbarElement.className="cropper-toolbar";var t=0;for(var r in M)M[r].state&&!e[M[r].state]||(t++,o.toolbarElement.appendChild(s.call(o,M[r])));o.rootElement.appendChild(o.toolbarElement);var n=parseInt(Y(o.toolbarElement.firstChild).width);o.toolbarElement.style.width=t*n+"px",o.showToolbarElement=document.createElement("div"),o.showToolbarElement.className="cropper-toolbar-show cropper-toolbar";var i=o.createIcon({name:"显示工具栏",className:"fa fa-caret-up",action:m});o.showToolbarElement.appendChild(i),o.showToolbarElement.style.display="none",o.rootElement.appendChild(o.showToolbarElement)}if(o.previewCanvas=document.createElement("canvas"),o.previewCanvas.className="cropper-preview-canvas",e.preview){e.preview.appendChild(o.previewCanvas);var a=Y(e.preview);o.previewCanvasWidth=parseInt(a.width),o.previewCanvasHeight=parseInt(a.height)}else o.previewCanvasWidth=o.srcImageWidth,o.previewCanvasHeight=o.srcImageHeight;o.previewCanvas.setAttribute("width",o.previewCanvasWidth),o.previewCanvas.setAttribute("height",o.previewCanvasHeight),o.previewContext=o.previewCanvas.getContext("2d"),o.repositionImage()},t.sourceImage.src=r.src},this.actions.setContainerElement(this.containerElement),this.containerElement}function E(){var e=this.rootElement.parentNode,t=this.containerElement.firstChild,r=this.srcImageWidth/this.srcImageHeight,o=["width","paddingLeft","paddingTop","paddingRight","paddingBottom","marginLeft","marginTop","marginRight","marginBottom"],n=Y(e),i=parseFloat(n.width),a=i/r,s=!0,c=!1,p=void 0;try{for(var l,d=o[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var h=l.value;this.rootElement.style[h]=n[h],this.containerElement.style[h]=n[h]}}catch(e){c=!0,p=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw p}}t.style.position="absolute",t.style.width=this.containerElement.style.width,e.style.height=a+"px",this.rootElement.style.height=a+"px",this.containerElement.style.height=a+"px",t.style.height=a+"px",this.repositionImage()}function y(){for(var e=!0,t=window.document.styleSheets,r=0;r<t.length;r++)if(t[r].href&&t[r].href.indexOf("font-awesome")>-1){e=!1;break}if(e){var o=document.createElement("link");o.rel="stylesheet",o.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(o)}}function b(){this.clear(),this.initCropperStyle()}function w(e){if(!this.actions.getState().options.zoomable)throw new Error("The photo is unzommable");var t=this.containerElement.firstChild,r=Y(this.containerElement),o=parseInt(r.width),n=parseInt(r.height),i=Y(t),a=parseInt(i.width),s=parseInt(i.height),c=parseInt(i.top),p=parseInt(i.left),l=o/2-p,d=n/2-c,h=a+o*e,u=s+n*e;if(!(h<=20||u<=20)){var f=h*(l/a)-o/2,m=u*(d/s)-n/2;t.style.width=h+"px",t.style.height=u+"px",t.style.left=-f+"px",t.style.top=-m+"px",this.actions.repositionCropper()}}function C(){this.photoZoom(.1)}function S(){this.photoZoom(-.1)}function _(e,t,r,o,n){e.style.top=t+"px",e.style.left=r+"px",e.style.width=o+"px",e.style.height=n+"px",e.style.display="block"}function O(e,t,r){e.style.top=t+"px",e.style.left=r+"px",e.style.display="block"}function T(){this.toggleMode("crop")}function x(){if(!this.actions.getState().options.movable)throw new Error("The cropper is unmovable");var e=this.containerElement.firstChild,t=Y(e),r=parseInt(t.top)||0,o=parseInt(t.left)||0;this.toggleMode("move",{top:r,left:o})}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.actions.toggleMode(e,t)}var Y=e("./helper").getComputedStyle,X=e("./helper").getElementOffset,M={movePhoto:{name:"移动图片",className:"fa fa-arrows",action:x,state:"movable"},crop:{name:"剪裁",className:"fa fa-crop",action:T},zoomOut:{name:"放大",className:"fa fa-search-plus",action:C,state:"zoomable"},zoomIn:{name:"缩小",className:"fa fa-search-minus",action:S,state:"zoomable"},clear:{name:"清除",className:"fa fa-times",action:o},reset:{name:"重置",className:"fa fa-refresh",action:a},hide:{name:"隐藏工具栏",className:"fa fa-caret-down",action:v}};r.clear=o,r.clearCropper=n,r.createIcon=s,r.draw=c,r.drawCovers=p,r.drawCropper=l,r.drawHandlers=d,r.drawPreview=h,r.getElementOffset=X,r.getImage=u,r.getSelectedRect=f,r.hideToolbar=v,r.initCropper=g,r.initCropperStyle=E,r.onresize=b,r.photoZoom=w,r.photoZoomIn=S,r.photoZoomOut=C,r.repositionImage=i,r.setModeCrop=T,r.setModeMove=x,r.showToolbar=m,r.toggleMode=R},{"./helper":24}],27:[function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=e("redux").createStore,a=e("./reducer"),s=function(){function e(){o(this,e),this.__unsubscribe=void 0,this.store=i(a)}return n(e,[{key:"clearCropper",value:function(){this.store.dispatch({type:"CLEAR_CROPPER"})}},{key:"cropperBorderEnd",value:function(){this.store.dispatch({type:"CROPPER_BORDER_END"})}},{key:"cropperBorderMove",value:function(e,t){this.store.dispatch({type:"CROPPER_BORDER_MOVE",x:e,y:t})}},{key:"cropperBorderStart",value:function(e,t){this.store.dispatch({type:"CROPPER_BORDER_START",x:e,y:t})}},{key:"getState",value:function(){return this.store.getState()}},{key:"setContainerElement",value:function(e){this.store.dispatch({type:"SET_CONTAINER_ELEMENT",element:e})}},{key:"setOptions",value:function(e){this.store.dispatch({type:"SET_OPTIONS",options:e})}},{key:"toggleMode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log(e),console.log(t),this.store.dispatch({type:"SET_MODE",mode:e,extras:t})}},{key:"repositionCropper",value:function(){this.store.dispatch({type:"REPOSITION_CROPPER"})}},{key:"reset",value:function(){alert("reset")}},{key:"subscribe",value:function(e){this.unsubscribe(),this.__unsubscribe=this.store.subscribe(e)}},{key:"unsubscribe",value:function(){this.__unsubscribe&&(this.__unsubscribe(),this.__unsubscribe=void 0)}}]),e}();t.exports=s},{"./reducer":28,redux:17}],28:[function(e,t,r){"use strict";function o(e,t){if(e.isCropDown){var r=Math.min(e.cropperStartX,e.cropperEndX),o=Math.min(e.cropperStartY,e.cropperEndY),n=Math.max(e.cropperStartX,e.cropperEndX),i=Math.max(e.cropperStartY,e.cropperEndY);return Object.assign({},e,{isCropDown:!1,cropperStartX:r,cropperStartY:o,cropperEndX:n,cropperEndY:i})}return e.isDragDown?Object.assign({},e,{isDragDown:!1,dragTarget:"none"}):Object.assign({},e)}function n(e,t){if(!e.containerElement)return e;var r=e.containerElement,o=e.options.cropperMode,n=p(e.containerElement);t.x-=n.left,t.y-=n.top;var i;if(e.isCropDown)return i=u(e.cropperStartX,e.cropperStartY,t.x,t.y,e.options.aspectRatio,o,r),Object.assign({},e,i);if(e.isDragDown){var a=e.dragStartX-t.x,s=e.dragStartY-t.y,c=e.options.aspectRatio;if("cropper"===e.dragTarget){switch(e.dragPoint){case"top-left":i=f(e._cropperStartX-a,e._cropperStartY-s,e.cropperEndX,e.cropperEndY,-1,-1,c,o,r);break;case"top-center":i=f(e.cropperStartX,e._cropperStartY-s,e.cropperEndX,e.cropperEndY,0,-1,c,o,r);break;case"top-right":i=f(e.cropperStartX,e._cropperStartY-s,e._cropperEndX-a,e.cropperEndY,1,-1,c,o,r);break;case"right-center":i=f(e.cropperStartX,e.cropperStartY,e._cropperEndX-a,e.cropperEndY,1,0,c,o,r);break;case"bottom-right":i=f(e.cropperStartX,e.cropperStartY,e._cropperEndX-a,e._cropperEndY-s,1,1,c,o,r);break;case"bottom-center":
i=f(e.cropperStartX,e.cropperStartY,e.cropperEndX,e._cropperEndY-s,0,1,c,o,r);break;case"bottom-left":i=f(e._cropperStartX-a,e.cropperStartY,e.cropperEndX,e._cropperEndY-s,-1,1,c,o,r);break;case"left-center":i=f(e._cropperStartX-a,e.cropperStartY,e.cropperEndX,e.cropperEndY,-1,0,c,o,r);break;default:i=d(e._cropperStartX-a,e._cropperStartY-s,e._cropperEndX-a,e._cropperEndY-s,o,r)}return Object.assign({},e,i)}if("image"===e.dragTarget){var m=h(e._leftOffset-a,e._topOffset-s,e.cropperStartX,e.cropperStartY,e.cropperEndX,e.cropperEndY,o,r);return Object.assign({},e,m)}return Object.assign({},e)}var v={},g=t.x,E=t.y,y=e.cropperStartX,b=e.cropperStartY,w=e.cropperEndX,C=e.cropperEndY;return l(g,E,y,b)||l(g,E,w,C)?v.rootCursor="nwse-resize":l(g,E,y,C)||l(g,E,w,b)?v.rootCursor="nesw-resize":l(g,E,(y+w)/2,b)||l(g,E,(y+w)/2,C)?v.rootCursor="ns-resize":l(g,E,y,(b+C)/2)||l(g,E,w,(b+C)/2)?v.rootCursor="ew-resize":g>y&&g<w&&E>b&&E<C?v.rootCursor="move":"move"===e.dragMode?v.rootCursor="move":v.rootCursor="default",Object.assign({},e,v)}function i(e,t){if(!e.containerElement)return e;var r=p(e.containerElement);if(t.x-=r.left,t.y-=r.top,"none"===e.dragMode)return Object.assign({},e,{isCropDown:!0,cropperStartX:t.x,cropperStartY:t.y,cropperEndX:t.x,cropperEndY:t.y,dragMode:"crop"});var o={};o.isDragDown=!0,o.dragTarget="cropper",o.dragStartX=t.x,o.dragStartY=t.y,o._cropperStartX=e.cropperStartX,o._cropperStartY=e.cropperStartY,o._cropperEndX=e.cropperEndX,o._cropperEndY=e.cropperEndY;var n=t.x,i=t.y,a=e.cropperStartX,s=e.cropperStartY,c=e.cropperEndX,d=e.cropperEndY;return l(n,i,a,s)?o.dragPoint="top-left":l(n,i,(a+c)/2,s)?o.dragPoint="top-center":l(n,i,c,s)?o.dragPoint="top-right":l(n,i,c,(s+d)/2)?o.dragPoint="right-center":l(n,i,c,d)?o.dragPoint="bottom-right":l(n,i,(a+c)/2,d)?o.dragPoint="bottom-center":l(n,i,a,d)?o.dragPoint="bottom-left":l(n,i,a,(s+d)/2)?o.dragPoint="left-center":t.x>a&&t.x<c&&t.y>s&&t.y<d?o.dragPoint="":"crop"===e.dragMode?(o.isDragDown=!1,o.dragStartY=-1,o.dragStartY=-1,o.dragPoint="",o.isCropDown=!0,o.cropperStartX=t.x,o.cropperStartY=t.y,o.cropperEndX=t.x,o.cropperEndY=t.y):(o.isDragDown=!0,o.dragTarget="image",o.dragStartX=t.x,o.dragStartY=t.y,o._leftOffset=e.leftOffset,o._topOffset=e.topOffset),Object.assign({},e,o)}function a(e){var t=c(e.containerElement.firstChild),r=parseFloat(t.left),o=parseFloat(t.top),n=r+parseFloat(t.width),i=o+parseFloat(t.height);return e.cropperStartX>=r&&e.cropperStartX<=n&&e.cropperStartY>=o&&e.cropperStartY<=i&&e.cropperEndX>=r&&e.cropperEndX<=n&&e.cropperEndY>=o&&e.cropperEndY<=i?e:Object.assign({},e,{cropperStartX:-1,cropperStartY:-1,cropperEndX:-1,cropperEndY:-1})}var s=e("../defaults"),c=e("../helper").getComputedStyle,p=e("../helper").getElementOffset,l=e("../helper").inRange,d=e("../helper").normalizeCoordinateDuringMoveCropper,h=e("../helper").normalizeCoordinateDuringMoveImage,u=e("../helper").normalizeCoordinateDuringCrop,f=e("../helper").normalizeCoordinateDuringResize,m={options:s,containerElement:null,isCropDown:!1,cropperStartX:-1,cropperStartY:-1,cropperEndX:-1,cropperEndY:-1,isDragDown:!1,dragPoint:"",dragTraget:"none",dragStartX:-1,dragStartY:-1,topOffset:-1,leftOffset:-1,dragMode:"none",rootCursor:"default"},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case"CLEAR_CROPPER":return Object.assign({},e,{isCropDown:!1,cropperStartX:-1,cropperStartY:-1,cropperEndX:-1,cropperEndY:-1,dragMode:"none",rootCursor:"default"});case"CROPPER_BORDER_END":return o(e,t);case"CROPPER_BORDER_MOVE":return n(e,t);case"CROPPER_BORDER_START":return i(e,t);case"REPOSITION_CROPPER":return a(e);case"SET_CONTAINER_ELEMENT":return Object.assign({},e,{containerElement:t.element});case"SET_MODE":var r={};r.dragMode=t.mode;var s=t.extras;return"move"===r.dragMode?(r.rootCursor="move",r.topOffset=s.top,r.leftOffset=s.left):r.rootCursor="default",Object.assign({},e,r);case"SET_OPTIONS":var c=Object.assign({},e.options,t.options);return Object.assign({},e,{options:c,dragMode:c.dragMode||e.dragMode});default:return Object.assign({},e)}};t.exports=v},{"../defaults":22,"../helper":24}]},{},[25])(25)});